(this.webpackJsonpmona_web=this.webpackJsonpmona_web||[]).push([[2],{102:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return h})),n.d(t,"d",(function(){return j}));var r=n(21),a=n(20),c=n(6),s=n(10),i=n.n(s),u=n(97),o=n(0),l=n(1),d="/input",f="/output",b="".concat(d,"/lib"),h=function(){function t(){Object(o.a)(this,t)}return Object(l.a)(t,null,[{key:"buildFileSystem",value:function(){var t=Object(u.a)(i.a.mark((function t(){var n,r,a,c,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.Module();case 2:return n=t.sent,(r=n.FS).mkdir(d),r.mkdir(f),a=r.mount(n.IDBFS,{},d),c=r.mount(n.IDBFS,{},f),t.next=10,new Promise((function(e,t){return r.syncfs(!0,(function(n){return n?t(n):e()}))}));case 10:return r.analyzePath(b).exists||r.mkdir(b),s=function(e){if(e.startsWith(f)&&(e.length===f.length||"/"===e[f.length]))throw new Error("Path '".concat(e,"' is not modifiable."));return e},t.abrupt("return",{sync:function(){return new Promise((function(e,t){return n.IDBFS.syncfs(a.mount,!1,(function(n){return n?t(n):e()}))}))},pull:function(){return new Promise((function(e,t){return n.IDBFS.syncfs(c.mount,!0,(function(n){return n?t(n):e()}))}))},read:function(e){return r.readFile(e,{encoding:"utf8"})},write:function(e,t){return r.writeFile(s(e),t)},unlink:function(e){return r.unlink(s(e))},mkdir:function(e){return r.mkdir(s(e))},rmdir:function(e){return r.rmdir(s(e))},node:function(e){return r.lookupPath(e,{follow:!0}).node},tryNode:function(e){return r.analyzePath(e,!1).object},isFile:function(e){return r.isFile(e.mode)},isDirectory:function(e){return r.isDir(e.mode)}});case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"isOutputPath",value:function(e){return e.startsWith(f)&&(e.length===f.length||"/"===e[f.length])}},{key:"refresh",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,r,s,u,o,l,d,f,b,h,j,v;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fs;case 2:return t=e.sent,e.next=5,t.pull();case 5:n=Object(c.a)(this._fileListeners);try{for(n.s();!(r=n.n()).done;)s=Object(a.a)(r.value,2),u=s[0],o=s[1],this.isOutputPath(u)&&(l=t.tryNode(u),this.notifyListenersDirect(o,l&&t.isFile(l)?t.read(u):null))}catch(i){n.e(i)}finally{n.f()}d=Object(c.a)(this._directoryListeners);try{for(d.s();!(f=d.n()).done;)b=Object(a.a)(f.value,2),h=b[0],j=b[1],this.isOutputPath(h)&&(v=t.tryNode(h))&&t.isDirectory(v)&&this.notifyListenersDirect(j,this.getDirectoryContents(t,h))}catch(i){d.e(i)}finally{d.f()}case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ensureNotExists",value:function(e,t){if(e.tryNode(t))throw new Error("A node at path '".concat(t,"' already exists."))}},{key:"isFile",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fs;case 2:return n=e.sent,r=n.tryNode(t),e.abrupt("return",!!r&&n.isFile(r));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createFile",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fs;case 2:return n=e.sent,this.ensureNotExists(n,t),n.write(t,""),e.next=7,n.sync();case 7:this.notifyFileListeners(t,""),this.notifyParentDirectoryListeners(n,t);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readFile",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fs;case 2:return n=e.sent,e.abrupt("return",n.read(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"writeFile",value:function(){var e=Object(u.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fs;case 2:return r=e.sent,a=null==r.tryNode(t),r.write(t,n),e.next=7,r.sync();case 7:this.notifyFileListeners(t,n),a&&this.notifyParentDirectoryListeners(r,t);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteFile",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fs;case 2:return(n=e.sent).unlink(t),e.next=6,n.sync();case 6:this.notifyFileListeners(t,null),this.notifyParentDirectoryListeners(n,t);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addFileListener",value:function(e,t){this.addListener(this._fileListeners,e,t)}},{key:"removeFileListener",value:function(e,t){this.removeListener(this._fileListeners,e,t)}},{key:"notifyFileListeners",value:function(e,t){this.notifyListeners(this._fileListeners,e,t)}},{key:"getDirectoryContents",value:function(e,t){var n=Object.entries(e.node(t).contents),r=function(e){return n.filter((function(t){var n=Object(a.a)(t,2),r=(n[0],n[1]);return e(r)})).map((function(e){var t=Object(a.a)(e,2),n=t[0];t[1];return n})).sort()};return{directories:r((function(t){return e.isDirectory(t)})),files:r((function(t){return e.isFile(t)}))}}},{key:"isSpecialDirectory",value:function(e){return e===d||e===b}},{key:"isDirectory",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fs;case 2:return n=e.sent,r=n.tryNode(t),e.abrupt("return",!!r&&n.isDirectory(r));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createDirectory",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fs;case 2:return n=e.sent,this.ensureNotExists(n,t),n.mkdir(t),e.next=7,n.sync();case 7:this.notifyDirectoryListeners(t,{directories:[],files:[]}),this.notifyParentDirectoryListeners(n,t);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"enumDirectory",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fs;case 2:return n=e.sent,e.abrupt("return",this.getDirectoryContents(n,t));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteDirectory",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fs;case 2:if(n=e.sent,!this.isSpecialDirectory(t)){e.next=5;break}throw new Error("Cannot delete special directory '".concat(t,"'."));case 5:return n.rmdir(t),e.next=8,n.sync();case 8:this.notifyParentDirectoryListeners(n,t);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addDirectoryListener",value:function(e,t){this.addListener(this._directoryListeners,e,t)}},{key:"removeDirectoryListener",value:function(e,t){this.removeListener(this._directoryListeners,e,t)}},{key:"notifyDirectoryListeners",value:function(e,t){this.notifyListeners(this._directoryListeners,e,t)}},{key:"notifyParentDirectoryListeners",value:function(e,t){var n=t.lastIndexOf("/");n>-1&&(t=t.substring(0,n),this.notifyDirectoryListeners(t,this.getDirectoryContents(e,t)))}},{key:"addListener",value:function(e,t,n){var r=e.get(t);r?r.add(n):e.set(t,new Set([n]))}},{key:"removeListener",value:function(e,t,n){var r=e.get(t);r&&r.delete(n)&&0===r.size&&e.delete(t)}},{key:"notifyListeners",value:function(e,t,n){var r=e.get(t);r&&this.notifyListenersDirect(r,n)}},{key:"notifyListenersDirect",value:function(e,t){e.forEach((function(e){try{e(t)}catch(n){console.trace(n)}}))}}]),t}();h._fs=h.buildFileSystem(),h._fileListeners=new Map,h._directoryListeners=new Map;var j=function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,null,[{key:"createWorker",value:function(){var e=this,t=new Worker("/MONA-WEB/static/js/worker.js",{name:"Mona"});return t.onerror=function(t){return e.stop("Error in worker: ".concat(t.message," (").concat(t.lineno,":").concat(t.colno,")"))},t.onmessageerror=function(t){return e.finishTask(t.data.id,(function(e){return e.reject("Failed to deserialize worker message.")}))},t.onmessage=function(t){return e.finishTask(t.data.id,(function(e){h.refresh().catch((function(e){return console.trace(e)})),t.data.error?e.reject(t.data.error):e.resolve(t.data)}))},t}},{key:"destroyWorker",value:function(e){e.terminate(),e.onerror=null,e.onmessageerror=null,e.onmessage=null}},{key:"finishTask",value:function(e,t){var n=this._tasks.get(e);if(n){console.assert(this._tasks.delete(e)),0===this._tasks.size&&this.notifyRunListeners(!1);try{t(n)}catch(r){console.trace(r)}}}},{key:"notifyRunListeners",value:function(e){this._runListeners.forEach((function(t){try{t(e)}catch(n){console.trace(n)}}))}},{key:"addRunListener",value:function(e){this._runListeners.add(e)}},{key:"removeRunListener",value:function(e){this._runListeners.delete(e)}},{key:"run",value:function(e){var t=this;return new Promise((function(n,r){var a=++t._nextId;t._tasks.set(a,{resolve:n,reject:r}),1===t._tasks.size&&t.notifyRunListeners(!0);try{t._worker.postMessage({id:a,path:e})}catch(c){t.finishTask(a,(function(e){return e.reject(c)}))}}))}},{key:"stop",value:function(e){var t=this._worker;this._worker=this.createWorker(),this.destroyWorker(t);var n=Object(r.a)(this._tasks.values());this._tasks.clear(),this.notifyRunListeners(!1),n.forEach((function(t){try{t.reject(e)}catch(n){console.trace(n)}}))}}]),e}();j._worker=j.createWorker(),j._tasks=new Map,j._runListeners=new Set,j._nextId=0}).call(this,n(206))},230:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return O}));var r=n(20),a=n(143),c=n(10),s=n.n(c),i=n(97),u=n(231),o=n(71),l=n(102),d=n(34);e.MonacoEnvironment={getWorkerUrl:function(e,t){return"/MONA-WEB/static/js/editor.worker.js"}};var f=function(e){return new Promise((function(t,n){return e((function(e){return t(!e),!0}))}))},b=function(e){return new Promise((function(t,n){return e((function(e){return t(),e||console.trace("Value already cleared."),!1}))}))},h=function(){var e=Object(i.a)(s.a.mark((function e(t,n,r,a,c,i){var u,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(){return setTimeout((function(){return h(t,n,r,a,c,i)}),500)},t.stale||t.saved){e.next=24;break}return e.next=4,f(a);case 4:if(e.sent){e.next=7;break}return u(),e.abrupt("return");case 7:if(e.prev=7,!t.stale){e.next=10;break}return e.abrupt("return");case 10:if(t.saved||!t.data){e.next=13;break}return e.next=13,l.a.writeFile(t.path,t.data);case 13:t.saved=!0,e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(7),i("Failed to save file: ".concat(String(e.t0))),e.abrupt("return");case 20:return e.prev=20,e.next=23,b(a);case 23:return e.finish(20);case 24:if(t.stale||t.result||!r){e.next=50;break}return e.next=27,f(c);case 27:if(e.sent){e.next=30;break}return u(),e.abrupt("return");case 30:if(e.prev=30,!t.stale){e.next=33;break}return e.abrupt("return");case 33:if(null===(o=t.result)||void 0===o){e.next=37;break}e.next=40;break;case 37:return e.next=39,l.d.run(t.path);case 39:t.result=e.sent;case 40:e.next=46;break;case 42:return e.prev=42,e.t1=e.catch(30),i("Failed to run file: ".concat(String(e.t1))),e.abrupt("return");case 46:return e.prev=46,e.next=49,b(c);case 49:return e.finish(46);case 50:t.stale||n((function(e){return t.stale?e:new Proxy(t,{})}));case 51:case"end":return e.stop()}}),e,null,[[7,16,20,24],[30,42,46,50]])})));return function(t,n,r,a,c,s){return e.apply(this,arguments)}}(),j=Object(o.createContext)({}),v=function(e,t){return e.hasResult?e.currentTab===t:"Errors"===t},p=function(e,t){return Object(a.a)({id:"".concat(t.toLowerCase()).concat(e.id),hidden:!v(e,t)},v(e,t)&&{"data-uk-height-viewport":"offset-top: true; offset-bottom: #tabs".concat(e.id)})},k=function(e){var t,n=e.tab,r=e.values,c=Object(o.useContext)(j);return Object(d.jsx)("textarea",Object(a.a)(Object(a.a)({},p(c,n)),{},{className:"uk-textarea uk-width-1-1",style:{fontFamily:"monospace"},readOnly:!0,value:null!==(t=null===r||void 0===r?void 0:r.join("\n"))&&void 0!==t?t:""}))},x=function(e){var t=e.tab,n=e.children,r=Object(o.useContext)(j);return Object(d.jsx)("li",{className:v(r,t)?"uk-active":"Errors"===t||r.hasResult?"":"uk-disabled",children:Object(d.jsx)("a",{href:"#".concat(t.toLowerCase()).concat(r.id),onClick:function(){return r.setCurrentTab(t)},children:n})})},O=function(e){var t,n,c=e.id,s=e.path,i=e.readOnly,f=Object(o.useRef)(null),b=Object(o.useRef)(null),v=Object(o.useState)([]),O=Object(r.a)(v,2),m=O[0],y=O[1],w=Object(o.useState)("Errors"),g=Object(r.a)(w,2),N=g[0],L=g[1],F=Object(o.useState)({path:s,data:null,saved:!0,result:null,stale:!1}),D=Object(r.a)(F,2),C=D[0],E=D[1],S=Object(o.useState)(!0),_=Object(r.a)(S,2),T=_[0],P=_[1],M=Object(o.useState)(!0),R=Object(r.a)(M,2),W=R[0],I=R[1],A=Object(o.useState)(!1),B=Object(r.a)(A,2),V=B[0],z=B[1],G=Object(o.useState)(!1),J=Object(r.a)(G,2),U=J[0],q=J[1],H=Object(o.useState)(1),K=Object(r.a)(H,2),Q=K[0],X=K[1],Y=Object(o.useMemo)((function(){return{id:c,currentTab:N,setCurrentTab:L,hasResult:!!C.result}}),[c,N,C]),Z=function(e){y((function(t){return t.concat([e])}))},$=function(e){return h(C,E,e,z,q,Z)};return Object(o.useEffect)((function(){T||I(!1)}),[T]),Object(o.useEffect)((function(){W&&P(!0)}),[W]),Object(o.useEffect)((function(){if(T&&!C.saved||W&&!C.result){var e=setTimeout((function(){return h(C,E,W,z,q,Z)}),500);return function(){return clearTimeout(e)}}}),[C,T,W]),Object(o.useEffect)((function(){var e,t,n=b.current;if(n){var r=null===(e=C.result)||void 0===e||null===(t=e.dfa)||void 0===t?void 0:t.graph;if(r)try{var a=(new DOMParser).parseFromString(r,"image/svg+xml").documentElement;return"svg"!==a.nodeName&&((a=document.createElement("div")).innerText=r),a.style.transformOrigin="top left",a.style.transform="scale(".concat(Q,")"),n.appendChild(a),function(){n.removeChild(a)}}catch(c){return void Z("Cannot render file: ".concat(String(c)))}}else Z("Graph DIV not found.")}),[C,Q]),Object(o.useEffect)((function(){if(f.current){var e=u.a.create(f.current,{readOnly:i,automaticLayout:!0});i||e.onDidChangeModelContent((function(t){E((function(n){return n.stale=!0,{path:s,data:e.getValue(),saved:t.isFlush,result:null,stale:!1}})),y([])}));var t=!0,n=function(n){if(null!=n&&(i||t)){t=!1;var r=e.saveViewState();e.setValue(n),r&&e.restoreViewState(r)}};return l.a.addFileListener(s,n),l.a.readFile(s).then(n).catch((function(e){return Z("Failed to read file: ".concat(String(e)))})),function(){l.a.removeFileListener(s,n),e.dispose()}}Z("Editor DIV not found.")}),[s,i]),Object(d.jsxs)("div",{className:"uk-grid-divider uk-grid-small uk-flex-nowrap","data-uk-grid":!0,children:[Object(d.jsxs)("div",{className:"uk-width-1-2",children:[Object(d.jsx)("div",{ref:f,"data-uk-height-viewport":"offset-top: true; offset-bottom: true"}),Object(d.jsx)("nav",{className:"uk-flex uk-flex-bottom uk-navbar-container","data-uk-navbar":!0,children:Object(d.jsxs)("div",{className:"uk-navbar-left",children:[Object(d.jsxs)("div",{className:"uk-navbar-item",children:[Object(d.jsx)("button",{className:"uk-button uk-button-default",disabled:C.saved||V,title:"Save File",onClick:function(){return $(!1)},children:Object(d.jsx)("span",{"data-uk-icon":"database"})}),Object(d.jsxs)("label",{children:[Object(d.jsx)("input",{type:"checkbox",className:"uk-checkbox",checked:T,onChange:function(e){return P(e.target.checked)}})," Auto-Save"]}),Object(d.jsx)("div",{"data-uk-spinner":!0,style:{visibility:V?"visible":"hidden"}})]}),Object(d.jsxs)("div",{className:"uk-navbar-item",children:[Object(d.jsx)("button",{className:"uk-button uk-button-".concat(U?"danger":"primary"),disabled:!!C.result,title:U?"Abort Run":"Run File",onClick:function(){return U?l.d.stop("Cancelled by user."):$(!0)},children:Object(d.jsx)("span",{"data-uk-icon":U?"bolt":"play"})}),Object(d.jsxs)("label",{children:[Object(d.jsx)("input",{type:"checkbox",className:"uk-checkbox",checked:W,onChange:function(e){return I(e.target.checked)}})," Auto-Run"]}),Object(d.jsx)("div",{"data-uk-spinner":!0,style:{visibility:U?"visible":"hidden"}})]})]})})]}),Object(d.jsx)("div",{className:"uk-width-1-2",children:Object(d.jsxs)(j.Provider,{value:Y,children:[Object(d.jsx)(k,{tab:"Errors",values:m}),Object(d.jsxs)("div",Object(a.a)(Object(a.a)({},p(Y,"Graph")),{},{children:[Object(d.jsx)("div",{className:"uk-margin",children:Object(d.jsx)("input",{className:"uk-range",type:"range",min:"1",max:"10",step:"0.1",value:Q,onChange:function(e){return X(parseFloat(e.target.value))}})}),Object(d.jsx)("div",{className:"uk-panel uk-panel-scrollable","data-uk-height-viewport":"offset-top: true; offset-bottom: #tabs".concat(Y.id),children:Object(d.jsx)("div",{ref:b})})]})),Object(d.jsx)(k,{tab:"SatisfyingExample",values:null===(t=C.result)||void 0===t?void 0:t.satisfyingExample}),Object(d.jsx)(k,{tab:"CounterExample",values:null===(n=C.result)||void 0===n?void 0:n.counterExample}),Object(d.jsx)("div",{id:"tabs".concat(c),children:Object(d.jsxs)("ul",{className:"uk-tab-bottom uk-margin-remove-bottom","data-uk-tab":!0,children:[Object(d.jsx)(x,{tab:"Errors",children:"Errors"}),Object(d.jsx)(x,{tab:"Graph",children:"Graph"}),Object(d.jsx)(x,{tab:"SatisfyingExample",children:"Satisfying Example"}),Object(d.jsx)(x,{tab:"CounterExample",children:"Counter-Example"})]})})]})})]})}}).call(this,n(206))},309:function(e,t,n){"use strict";n.r(t),n.d(t,"AppContext",(function(){return S}));var r=n(20),a=n(71),c=n(228),s=n(10),i=n.n(s),u=n(97),o=n(191),l=n.n(o);function d(e){return f.apply(this,arguments)}function f(){return(f=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.modal.confirm(t);case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!!e.t0&&window.confirm(t));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function b(e){return h.apply(this,arguments)}function h(){return(h=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.modal.alert(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),window.alert(t);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}var j=n(102),v=n(34),p=function(e){return 0===e.length||e.includes("/")},k=function(e){return e.substring(e.lastIndexOf("/")+1)},x=function(e){var t=e.path,n=e.readOnly,r=Object(a.useContext)(S),c=k(t),s=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("Are you sure you want to delete the file '".concat(t,"'?"));case 2:if(!e.sent){e.next=12;break}return e.prev=3,e.next=6,j.a.deleteFile(t);case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(3),e.next=12,b(String(e.t0));case 12:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"uk-flex",children:[Object(v.jsx)("div",{className:"uk-width-auto",children:Object(v.jsx)("div",{className:"uk-icon-image"})}),Object(v.jsx)("div",{className:"uk-width-expand",children:Object(v.jsxs)("button",{className:"uk-width-1-1 uk-text-left uk-button uk-button-small uk-button-default",style:{textTransform:"none"},title:"Open File",onClick:function(){return r.openTab(t,n)},children:[Object(v.jsx)("span",{"data-uk-icon":"file-text"})," ",c]})}),Object(v.jsx)("div",{className:"uk-width-auto",children:n||Object(v.jsx)("button",{className:"uk-button uk-button-small uk-button-danger uk-padding-remove",title:"Delete File",onClick:s,children:Object(v.jsx)("span",{"data-uk-icon":"close"})})})]})},O=function e(t){var n=t.path,c=t.readOnly,s=Object(a.useContext)(S),o=j.a.isSpecialDirectory(n),l=Object(a.useState)(null),f=Object(r.a)(l,2),h=f[0],O=f[1],m=Object(a.useState)(o),y=Object(r.a)(m,2),w=y[0],g=y[1],N=Object(a.useState)(""),L=Object(r.a)(N,2),F=L[0],D=L[1],C=k(n),E=h&&(h instanceof Error||h.directories.length>0||h.files.length>0||!c);Object(a.useEffect)((function(){return j.a.addDirectoryListener(n,O),j.a.enumDirectory(n).then(O).catch((function(e){return O(new Error(String(e)))})),function(){return j.a.removeDirectoryListener(n,O)}}),[n]);var _=function(){return g((function(e){return!e}))},T=function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(n,"/").concat(F),e.prev=1,e.next=4,j.a.createFile(t);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),e.next=10,b(String(e.t0));case 10:return e.abrupt("return",e.sent);case 11:D(""),s.openTab(t,c);case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.createDirectory("".concat(n,"/").concat(F));case 3:e.next=10;break;case 5:return e.prev=5,e.t0=e.catch(0),e.next=9,b(String(e.t0));case 9:return e.abrupt("return",e.sent);case 10:D("");case 11:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h||h instanceof Error||!(h.directories.length>0||h.files.length>0)){e.next=5;break}return e.next=3,b("The directory '".concat(n,"' is not empty."));case 3:case 11:e.next=17;break;case 5:return e.next=7,d("Are you sure you want to delete the folder '".concat(n,"'?"));case 7:if(!e.sent){e.next=17;break}return e.prev=8,e.next=11,j.a.deleteDirectory(n);case 13:return e.prev=13,e.t0=e.catch(8),e.next=17,b(String(e.t0));case 17:case"end":return e.stop()}}),e,null,[[8,13]])})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"uk-flex",children:[Object(v.jsx)("div",{className:"uk-width-auto",children:Object(v.jsx)("div",{className:"uk-icon-image",children:E&&Object(v.jsx)("span",{"data-uk-icon":w?"chevron-down":"chevron-right",style:{cursor:"pointer"},onClick:_})})}),Object(v.jsxs)("div",{className:"uk-width-expand",children:[Object(v.jsxs)("div",{className:"uk-flex",children:[Object(v.jsx)("div",{className:"uk-width-expand",children:Object(v.jsxs)("button",{className:"uk-width-1-1 uk-text-left uk-button uk-button-small uk-button-".concat(o?"primary":"secondary"),title:"".concat(E?w?"Collapse":"Expand":"Empty"," Folder"),style:{textTransform:"none"},onClick:_,disabled:!E,children:[Object(v.jsx)("span",{"data-uk-icon":"folder"}),Object(v.jsx)("span",{className:"uk-margin-small-left uk-margin-small-right",children:C}),!h&&Object(v.jsx)("div",{"data-uk-spinner":"ratio: 0.5"})]})}),Object(v.jsx)("div",{className:"uk-width-auto",children:c||o||Object(v.jsx)("button",{className:"uk-button uk-button-small uk-button-danger uk-padding-remove",title:"Delete Folder",onClick:M,children:Object(v.jsx)("span",{"data-uk-icon":"close"})})})]}),E&&w&&(h instanceof Error?Object(v.jsx)("div",{className:"uk-alert-danger",children:Object(v.jsx)("p",{children:h})}):Object(v.jsxs)(v.Fragment,{children:[h.directories.map((function(t){return Object(v.jsx)(e,{path:"".concat(n,"/").concat(t),readOnly:c},t)})),h.files.map((function(e){return Object(v.jsx)(x,{path:"".concat(n,"/").concat(e),readOnly:c},e)})),c||Object(v.jsxs)("div",{className:"uk-flex",children:[Object(v.jsx)("div",{className:"uk-width-auto",children:Object(v.jsx)("div",{className:"uk-icon-image"})}),Object(v.jsx)("div",{className:"uk-width-expand",children:Object(v.jsxs)("div",{className:"uk-inline",children:[Object(v.jsx)("span",{className:"uk-form-icon","data-uk-icon":"plus"}),Object(v.jsx)("input",{className:"uk-input uk-form-small uk-width-1-1",placeholder:"New ".concat(C," item..."),value:F,onChange:function(e){return D(e.target.value)}})]})}),Object(v.jsx)("div",{className:"uk-width-auto",children:Object(v.jsxs)("div",{className:"uk-button-group",children:[Object(v.jsx)("button",{className:"uk-button uk-button-small uk-button-primary uk-padding-remove",title:"Create File",onClick:T,disabled:p(F),children:Object(v.jsx)("span",{"data-uk-icon":"file-text"})}),Object(v.jsx)("button",{className:"uk-button uk-button-small uk-button-secondary uk-padding-remove",title:"Create Directory",onClick:P,disabled:p(F),children:Object(v.jsx)("span",{"data-uk-icon":"folder"})})]})})]})]}))]})]})},m=function(){return Object(v.jsxs)("div",{className:"uk-text-nowrap",children:[Object(v.jsx)(O,{path:j.b,readOnly:!1}),Object(v.jsx)(O,{path:j.c,readOnly:!0})]})},y=n(39),w=n(143),g=n(0),N=n(1),L=function(){function e(t){Object(g.a)(this,e),this.setTabs=t}return Object(N.a)(e,[{key:"openTab",value:function(e,t){this.setTabs((function(n){return Object(w.a)(Object(w.a)({},Object.fromEntries(Object.entries(n).map((function(e){var t=Object(r.a)(e,2),n=t[0],a=t[1];return[n,Object(w.a)(Object(w.a)({},a),{},{selected:!1})]})))),{},Object(y.a)({},e,{readOnly:t,selected:!0}))}))}},{key:"closeTab",value:function(e){this.setTabs((function(t){var n=t[e];if(n){var r=Object(w.a)({},t);if(delete r[e],n.selected){var a=Object.keys(t),c=a.indexOf(e),s=c+1<a.length?a[c+1]:c-1>=0?a[c-1]:void 0;if(void 0!==s){var i=r[s];i&&(r[s]=Object(w.a)(Object(w.a)({},i),{},{selected:!0}))}}return r}return t}))}}]),e}(),F=function(e){var t=e.id,n=e.path,c=e.selected,s=e.readOnly,i=Object(a.useContext)(S),u=Object(a.useState)(!1),o=Object(r.a)(u,2),l=o[0],d=o[1];return Object(a.useEffect)((function(){var e=function(e){return d(null==e)};return j.a.addFileListener(n,e),j.a.isFile(n).then((function(e){return d(!e)})).catch(console.trace),function(){return j.a.removeFileListener(n,e)}}),[i,n]),Object(v.jsx)("li",{className:c?"uk-active":"",children:Object(v.jsxs)("a",{href:t,onClick:function(){return i.openTab(n,s)},children:[Object(v.jsx)("span",{"uk-icon":"icon: file-text"}),Object(v.jsxs)("span",{className:"uk-margin-small-left uk-margin-small-right",style:{textTransform:"none"},children:[n,s&&" (read-only)",l&&" (deleted)"]}),Object(v.jsx)("button",{"data-uk-close":!0,onClick:function(e){i.closeTab(n),e.stopPropagation()}})]})})},D=n(229),C=n.n(D);n(239);l.a.use(C.a);var E=n(230),S=Object(a.createContext)({}),_=function(){var e=Object(a.useState)({}),t=Object(r.a)(e,2),n=t[0],c=t[1],s=Object(a.useMemo)((function(){return new L(c)}),[]);return Object(v.jsxs)(S.Provider,{value:s,children:[Object(v.jsxs)("nav",{className:"uk-navbar-container uk-navbar-transparent uk-light uk-background-primary","data-uk-navbar":!0,children:[Object(v.jsx)("div",{className:"uk-navbar-left",children:Object(v.jsx)("a",{className:"uk-navbar-item uk-logo",href:"https://www.brics.dk/mona/",children:"MONA Web"})}),Object(v.jsx)("div",{className:"uk-navbar-right",children:Object(v.jsx)("div",{className:"uk-navbar-item",children:Object(v.jsx)("a",{className:"uk-button uk-button-default",href:"http://www.brics.dk/mona/mona14.pdf",children:"Manual"})})})]}),Object(v.jsxs)("div",{className:"uk-grid-divider uk-grid-small uk-flex-nowrap","data-uk-grid":!0,"data-uk-height-viewport":"offset-top: true",children:[Object(v.jsxs)("div",{className:"uk-width-medium",children:[Object(v.jsx)("ul",{className:"uk-flex-center","data-uk-tab":!0,children:Object(v.jsx)("li",{className:"uk-active",children:Object(v.jsxs)("a",{href:"#browser",children:[Object(v.jsx)("span",{"uk-icon":"icon: copy"}),Object(v.jsx)("span",{className:"uk-margin-small-left",style:{textTransform:"none"},children:"Files"})]})})}),Object(v.jsx)("div",{id:"browser",children:Object(v.jsx)(m,{})})]}),Object(v.jsxs)("div",{className:"uk-width-extend",children:[Object(v.jsx)("ul",{"data-uk-tab":!0,children:Object.entries(n).map((function(e,t){var n=Object(r.a)(e,2),a=n[0],c=n[1];return Object(v.jsx)(F,{id:"#workspace".concat(t),path:a,selected:c.selected,readOnly:c.readOnly},a)}))}),Object(v.jsx)("div",{className:"uk-margin",children:Object.entries(n).map((function(e,t){var n=Object(r.a)(e,2),a=n[0],c=n[1];return Object(v.jsx)("div",{id:"workspace".concat(t),hidden:!c.selected,children:Object(v.jsx)(E.a,{id:t,path:a,readOnly:c.readOnly})},a)}))})]})]})]})};Object(c.render)(Object(v.jsx)(_,{}),document.getElementById("app"))}},[[309,3,4]]]);
//# sourceMappingURL=main.8262760c.chunk.js.map