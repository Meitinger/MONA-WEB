(this.webpackJsonpmona_web=this.webpackJsonpmona_web||[]).push([[2],{102:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return b})),n.d(t,"d",(function(){return h}));var r=n(21),a=n(20),c=n(6),s=n(10),i=n.n(s),u=n(97),o=n(0),l=n(1),d="/input",f="/output",b=function(){function t(){Object(o.a)(this,t)}return Object(l.a)(t,null,[{key:"buildFileSystem",value:function(){var t=Object(u.a)(i.a.mark((function t(){var n,r,a,c,s;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.MonaModule();case 2:return n=t.sent,(r=n.FS).mkdir(d),r.mkdir(f),a=r.mount(n.IDBFS,{},d),c=r.mount(n.IDBFS,{},f),t.next=10,new Promise((function(e,t){return r.syncfs(!0,(function(n){return n?t(n):e()}))}));case 10:return s=function(e){if(e.startsWith(f)&&(e.length===f.length||"/"===e[f.length]))throw new Error("Path '".concat(e,"' is not modifiable."));return e},t.abrupt("return",{sync:function(){return new Promise((function(e,t){return n.IDBFS.syncfs(a.mount,!1,(function(n){return n?t(n):e()}))}))},pull:function(){return new Promise((function(e,t){return n.IDBFS.syncfs(c.mount,!0,(function(n){return n?t(n):e()}))}))},read:function(e){return r.readFile(e,{encoding:"utf8"})},write:function(e,t){return r.writeFile(s(e),t)},unlink:function(e){return r.unlink(s(e))},mkdir:function(e){return r.mkdir(s(e))},rmdir:function(e){return r.rmdir(s(e))},node:function(e){return r.lookupPath(e,{follow:!0}).node},tryNode:function(e){return r.analyzePath(e,!1).object},isFile:function(e){return r.isFile(e.mode)},isDirectory:function(e){return r.isDir(e.mode)}});case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"isOutputPath",value:function(e){return e.startsWith(f)&&(e.length===f.length||"/"===e[f.length])}},{key:"refresh",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,r,s,u,o,l,d,f,b,h,j,v;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fs;case 2:return t=e.sent,e.next=5,t.pull();case 5:n=Object(c.a)(this._fileListeners);try{for(n.s();!(r=n.n()).done;)s=Object(a.a)(r.value,2),u=s[0],o=s[1],this.isOutputPath(u)&&(l=t.tryNode(u),this.notifyListenersDirect(o,l&&t.isFile(l)?t.read(u):null))}catch(i){n.e(i)}finally{n.f()}d=Object(c.a)(this._directoryListeners);try{for(d.s();!(f=d.n()).done;)b=Object(a.a)(f.value,2),h=b[0],j=b[1],this.isOutputPath(h)&&(v=t.tryNode(h))&&t.isDirectory(v)&&this.notifyListenersDirect(j,this.getDirectoryContents(t,h))}catch(i){d.e(i)}finally{d.f()}case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ensureNotExists",value:function(e,t){if(e.tryNode(t))throw new Error("A node at path '".concat(t,"' already exists."))}},{key:"isFile",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fs;case 2:return n=e.sent,r=n.tryNode(t),e.abrupt("return",!!r&&n.isFile(r));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createFile",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fs;case 2:return n=e.sent,this.ensureNotExists(n,t),n.write(t,""),e.next=7,n.sync();case 7:this.notifyFileListeners(t,""),this.notifyParentDirectoryListeners(n,t);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readFile",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fs;case 2:return n=e.sent,e.abrupt("return",n.read(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"writeFile",value:function(){var e=Object(u.a)(i.a.mark((function e(t,n){var r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fs;case 2:return r=e.sent,a=null==r.tryNode(t),r.write(t,n),e.next=7,r.sync();case 7:this.notifyFileListeners(t,n),a&&this.notifyParentDirectoryListeners(r,t);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteFile",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fs;case 2:return(n=e.sent).unlink(t),e.next=6,n.sync();case 6:this.notifyFileListeners(t,null),this.notifyParentDirectoryListeners(n,t);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addFileListener",value:function(e,t){this.addListener(this._fileListeners,e,t)}},{key:"removeFileListener",value:function(e,t){this.removeListener(this._fileListeners,e,t)}},{key:"notifyFileListeners",value:function(e,t){this.notifyListeners(this._fileListeners,e,t)}},{key:"getDirectoryContents",value:function(e,t){var n=Object.entries(e.node(t).contents),r=function(e){return n.filter((function(t){var n=Object(a.a)(t,2),r=(n[0],n[1]);return e(r)})).map((function(e){var t=Object(a.a)(e,2),n=t[0];t[1];return n})).sort()};return{directories:r((function(t){return e.isDirectory(t)})),files:r((function(t){return e.isFile(t)}))}}},{key:"isSpecialDirectory",value:function(e){return e===d||e===f}},{key:"isDirectory",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fs;case 2:return n=e.sent,r=n.tryNode(t),e.abrupt("return",!!r&&n.isDirectory(r));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createDirectory",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fs;case 2:return n=e.sent,this.ensureNotExists(n,t),n.mkdir(t),e.next=7,n.sync();case 7:this.notifyDirectoryListeners(t,{directories:[],files:[]}),this.notifyParentDirectoryListeners(n,t);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"enumDirectory",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fs;case 2:return n=e.sent,e.abrupt("return",this.getDirectoryContents(n,t));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteDirectory",value:function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fs;case 2:if(n=e.sent,!this.isSpecialDirectory(t)){e.next=5;break}throw new Error("Cannot delete special directory '".concat(t,"'."));case 5:return n.rmdir(t),e.next=8,n.sync();case 8:this.notifyParentDirectoryListeners(n,t);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addDirectoryListener",value:function(e,t){this.addListener(this._directoryListeners,e,t)}},{key:"removeDirectoryListener",value:function(e,t){this.removeListener(this._directoryListeners,e,t)}},{key:"notifyDirectoryListeners",value:function(e,t){this.notifyListeners(this._directoryListeners,e,t)}},{key:"notifyParentDirectoryListeners",value:function(e,t){var n=t.lastIndexOf("/");n>-1&&(t=t.substring(0,n),this.notifyDirectoryListeners(t,this.getDirectoryContents(e,t)))}},{key:"addListener",value:function(e,t,n){var r=e.get(t);r?r.add(n):e.set(t,new Set([n]))}},{key:"removeListener",value:function(e,t,n){var r=e.get(t);r&&r.delete(n)&&0===r.size&&e.delete(t)}},{key:"notifyListeners",value:function(e,t,n){var r=e.get(t);r&&this.notifyListenersDirect(r,n)}},{key:"notifyListenersDirect",value:function(e,t){e.forEach((function(e){try{e(t)}catch(n){console.trace(n)}}))}}]),t}();b._fs=b.buildFileSystem(),b._fileListeners=new Map,b._directoryListeners=new Map;var h=function(){function e(){Object(o.a)(this,e)}return Object(l.a)(e,null,[{key:"createWorker",value:function(){var e=this,t=new Worker("/MONA-WEB/static/js/worker.js",{name:"Mona"});return t.onerror=function(t){return e.stop("Error in worker: ".concat(t.message," (").concat(t.lineno,":").concat(t.colno,")"))},t.onmessageerror=function(t){return e.finishTask(t.data.id,(function(e){return e.reject("Failed to deserialize worker message.")}))},t.onmessage=function(t){return e.finishTask(t.data.id,(function(e){b.refresh().catch((function(e){return console.trace(e)})),t.data.error?e.reject(t.data.error):e.resolve(t.data)}))},t}},{key:"destroyWorker",value:function(e){e.terminate(),e.onerror=null,e.onmessageerror=null,e.onmessage=null}},{key:"finishTask",value:function(e,t){var n=this._tasks.get(e);if(n){console.assert(this._tasks.delete(e)),0===this._tasks.size&&this.notifyRunListeners(!1);try{t(n)}catch(r){console.trace(r)}}}},{key:"notifyRunListeners",value:function(e){this._runListeners.forEach((function(t){try{t(e)}catch(n){console.trace(n)}}))}},{key:"addRunListener",value:function(e){this._runListeners.add(e)}},{key:"removeRunListener",value:function(e){this._runListeners.delete(e)}},{key:"run",value:function(e,t){var n=this;return new Promise((function(r,a){var c=++n._nextId;n._tasks.set(c,{resolve:r,reject:a}),1===n._tasks.size&&n.notifyRunListeners(!0);try{n._worker.postMessage({id:c,path:e,module:t})}catch(s){n.finishTask(c,(function(e){return e.reject(s)}))}}))}},{key:"stop",value:function(e){var t=this._worker;this._worker=this.createWorker(),this.destroyWorker(t);var n=Object(r.a)(this._tasks.values());this._tasks.clear(),this.notifyRunListeners(!1),n.forEach((function(t){try{t.reject(e)}catch(n){console.trace(n)}}))}}]),e}();h._worker=h.createWorker(),h._tasks=new Map,h._runListeners=new Set,h._nextId=0}).call(this,n(206))},230:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return m}));var r=n(20),a=n(109),c=n(10),s=n.n(c),i=n(97),u=n(231),o=n(71),l=n(102),d=n(34);e.MonacoEnvironment={getWorkerUrl:function(e,t){return"/MONA-WEB/static/js/editor.worker.js"}};var f=function(e){return new Promise((function(t,n){return e((function(e){return t(!e),!0}))}))},b=function(e){return new Promise((function(t,n){return e((function(e){return t(),e||console.trace("Value already cleared."),!1}))}))},h=function(){var e=Object(i.a)(s.a.mark((function e(t,n,r,a,c,i){var u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(){return setTimeout((function(){return h(t,n,r,a,c,i)}),500)},t.stale||t.saved){e.next=24;break}return e.next=4,f(a);case 4:if(e.sent){e.next=7;break}return u(),e.abrupt("return");case 7:if(e.prev=7,!t.stale){e.next=10;break}return e.abrupt("return");case 10:if(t.saved){e.next=13;break}return e.next=13,l.a.writeFile(t.path,t.data);case 13:t.saved=!0,e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(7),i("Failed to save file: ".concat(String(e.t0))),e.abrupt("return");case 20:return e.prev=20,e.next=23,b(a);case 23:return e.finish(20);case 24:if(t.stale||t.ran||!r){e.next=48;break}return e.next=27,f(c);case 27:if(e.sent){e.next=30;break}return u(),e.abrupt("return");case 30:if(e.prev=30,!t.stale){e.next=33;break}return e.abrupt("return");case 33:if(t.ran){e.next=38;break}return e.next=36,l.d.run(t.path,t.data.startsWith("MONA DFA")?"dfa2dot":"mona");case 36:t.result=e.sent,t.ran=!0;case 38:e.next=44;break;case 40:return e.prev=40,e.t1=e.catch(30),i("Failed to run file: ".concat(String(e.t1))),e.abrupt("return");case 44:return e.prev=44,e.next=47,b(c);case 47:return e.finish(44);case 48:t.stale||n((function(e){return t.stale?e:new Proxy(t,{})}));case 49:case"end":return e.stop()}}),e,null,[[7,16,20,24],[30,40,44,48]])})));return function(t,n,r,a,c,s){return e.apply(this,arguments)}}(),j=Object(o.createContext)({}),v=function(e,t){return e.visible&&(e.hasResult?e.currentTab===t:"Errors"===t)},p=function(e,t){return v(e,t)?{"data-uk-height-viewport":"offset-top: true; offset-bottom: #tabs".concat(e.id)}:{}},k=function(e,t){return Object(a.a)({id:"".concat(t.toLowerCase()).concat(e.id),hidden:!v(e,t)},p(e,t))},x=function(e){var t,n=e.tab,r=e.values,c=Object(o.useContext)(j);return Object(d.jsx)("textarea",Object(a.a)(Object(a.a)({},k(c,n)),{},{className:"uk-textarea uk-width-1-1",style:{fontFamily:"monospace"},readOnly:!0,value:null!==(t=null===r||void 0===r?void 0:r.join("\n"))&&void 0!==t?t:""}))},O=function(e){var t=e.tab,n=e.children,r=Object(o.useContext)(j);return Object(d.jsx)("li",{className:v(r,t)?"uk-active":"Errors"===t||r.hasResult?"":"uk-disabled",children:Object(d.jsx)("a",{href:"#".concat(t.toLowerCase()).concat(r.id),onClick:function(e){r.setCurrentTab(t),e.preventDefault()},children:n})})},m=function(e){var t,n,c=e.id,s=e.path,i=e.readOnly,f=e.selected,b=Object(o.useRef)(null),v=Object(o.useRef)(null),m=Object(o.useState)([]),y=Object(r.a)(m,2),w=y[0],g=y[1],N=Object(o.useState)("Graph"),L=Object(r.a)(N,2),F=L[0],D=L[1],C=Object(o.useState)({path:s,data:"",saved:!0,ran:!0,result:null,stale:!1}),S=Object(r.a)(C,2),E=S[0],_=S[1],T=Object(o.useState)(!0),P=Object(r.a)(T,2),M=P[0],R=P[1],I=Object(o.useState)(!0),W=Object(r.a)(I,2),A=W[0],B=W[1],V=Object(o.useState)(!1),G=Object(r.a)(V,2),z=G[0],J=G[1],U=Object(o.useState)(!1),q=Object(r.a)(U,2),H=q[0],K=q[1],Q=Object(o.useState)(1),X=Object(r.a)(Q,2),Y=X[0],Z=X[1],$=Object(o.useMemo)((function(){return{id:c,currentTab:F,setCurrentTab:D,hasResult:!!E.result,visible:f}}),[c,F,E,f]),ee=function(e){g((function(t){return t.concat([e])}))},te=function(e){return h(E,_,e,J,K,ee)};return Object(o.useEffect)((function(){M||B(!1)}),[M]),Object(o.useEffect)((function(){A&&R(!0)}),[A]),Object(o.useEffect)((function(){if(M&&!E.saved||A&&!E.result){var e=setTimeout((function(){return h(E,_,A,J,K,ee)}),500);return function(){return clearTimeout(e)}}}),[E,M,A]),Object(o.useEffect)((function(){var e,t,n=v.current;if(n){var r=null===(e=E.result)||void 0===e||null===(t=e.dfa)||void 0===t?void 0:t.graph;if(r)try{var a=(new DOMParser).parseFromString(r,"image/svg+xml").documentElement;return"svg"!==a.nodeName&&((a=document.createElement("div")).innerText=r),a.style.transformOrigin="top left",a.style.transform="scale(".concat(Y,")"),n.appendChild(a),function(){n.removeChild(a)}}catch(c){return void ee("Cannot render file: ".concat(String(c)))}}else ee("Graph DIV not found.")}),[E,Y]),Object(o.useEffect)((function(){if(b.current){var e=u.a.create(b.current,{readOnly:i,automaticLayout:!0});e.onDidChangeModelContent((function(t){_((function(n){return n.stale=!0,{path:s,data:e.getValue(),saved:t.isFlush,ran:!1,result:null,stale:!1}})),g([])}));var t=!0,n=function(n){if(null!=n&&(i||t)){t=!1;var r=e.saveViewState();e.setValue(n),r&&e.restoreViewState(r)}};return l.a.addFileListener(s,n),l.a.readFile(s).then(n).catch((function(e){return ee("Failed to read file: ".concat(String(e)))})),function(){l.a.removeFileListener(s,n),e.dispose()}}ee("Editor DIV not found.")}),[s,i]),Object(d.jsxs)("div",{className:"uk-grid-divider uk-grid-small uk-flex-nowrap","data-uk-grid":!0,children:[Object(d.jsxs)("div",{className:"uk-width-1-2",children:[Object(d.jsx)("div",Object(a.a)({ref:b},f&&{"data-uk-height-viewport":"offset-top: true; offset-bottom: true"})),Object(d.jsx)("nav",{className:"uk-flex uk-flex-bottom uk-navbar-container","data-uk-navbar":!0,children:Object(d.jsxs)("div",{className:"uk-navbar-left",children:[Object(d.jsxs)("div",{className:"uk-navbar-item",children:[Object(d.jsx)("button",{className:"uk-button uk-button-default",disabled:E.saved||z,title:"Save File",onClick:function(){return te(!1)},children:Object(d.jsx)("span",{"data-uk-icon":"database"})}),Object(d.jsxs)("label",{children:[Object(d.jsx)("input",{type:"checkbox",className:"uk-checkbox",checked:M,onChange:function(e){return R(e.target.checked)}})," Auto-Save"]}),Object(d.jsx)("div",{"data-uk-spinner":!0,style:{visibility:z?"visible":"hidden"}})]}),Object(d.jsxs)("div",{className:"uk-navbar-item",children:[Object(d.jsx)("button",{className:"uk-button uk-button-".concat(H?"danger":"primary"),disabled:E.ran,title:H?"Abort Run":"Run File",onClick:function(){return H?l.d.stop("Cancelled by user."):te(!0)},children:Object(d.jsx)("span",{"data-uk-icon":H?"bolt":"play"})}),Object(d.jsxs)("label",{children:[Object(d.jsx)("input",{type:"checkbox",className:"uk-checkbox",checked:A,onChange:function(e){return B(e.target.checked)}})," Auto-Run"]}),Object(d.jsx)("div",{"data-uk-spinner":!0,style:{visibility:H?"visible":"hidden"}})]})]})})]}),Object(d.jsx)("div",{className:"uk-width-1-2",children:Object(d.jsxs)(j.Provider,{value:$,children:[Object(d.jsx)(x,{tab:"Errors",values:w}),Object(d.jsxs)("div",Object(a.a)(Object(a.a)({},k($,"Graph")),{},{children:[Object(d.jsx)("div",{className:"uk-margin",children:Object(d.jsx)("input",{className:"uk-range",type:"range",min:"1",max:"10",step:"0.1",value:Y,onChange:function(e){return Z(parseFloat(e.target.value))}})}),Object(d.jsx)("div",Object(a.a)(Object(a.a)({className:"uk-panel uk-panel-scrollable"},p($,"Graph")),{},{children:Object(d.jsx)("div",{ref:v})}))]})),Object(d.jsx)(x,{tab:"SatisfyingExample",values:null===(t=E.result)||void 0===t?void 0:t.satisfyingExample}),Object(d.jsx)(x,{tab:"CounterExample",values:null===(n=E.result)||void 0===n?void 0:n.counterExample}),Object(d.jsx)("div",{id:"tabs".concat($.id),children:Object(d.jsxs)("ul",{className:"uk-tab-bottom uk-margin-remove-bottom uk-tab",children:[Object(d.jsx)(O,{tab:"Errors",children:"Errors"}),Object(d.jsx)(O,{tab:"Graph",children:"Graph"}),Object(d.jsx)(O,{tab:"SatisfyingExample",children:"Satisfying Example"}),Object(d.jsx)(O,{tab:"CounterExample",children:"Counter-Example"})]})})]})})]})}}).call(this,n(206))},309:function(e,t,n){"use strict";n.r(t),n.d(t,"AppContext",(function(){return E}));var r=n(109),a=n(20),c=n(71),s=n(228),i=n(10),u=n.n(i),o=n(97),l=n(191),d=n.n(l);function f(e){return b.apply(this,arguments)}function b(){return(b=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.modal.confirm(t);case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",!!e.t0&&window.confirm(t));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function h(e){return j.apply(this,arguments)}function j(){return(j=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.modal.alert(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),window.alert(t);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}var v=n(102),p=n(34),k=function(e){return 0===e.length||e.includes("/")},x=function(e){return e.substring(e.lastIndexOf("/")+1)},O=function(e){var t=e.path,n=e.readOnly,r=Object(c.useContext)(E),a=x(t),s=function(){var e=Object(o.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("Are you sure you want to delete the file '".concat(t,"'?"));case 2:if(!e.sent){e.next=12;break}return e.prev=3,e.next=6,v.a.deleteFile(t);case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(3),e.next=12,h(String(e.t0));case 12:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"uk-flex",children:[Object(p.jsx)("div",{className:"uk-width-auto",children:Object(p.jsx)("div",{className:"uk-icon-image"})}),Object(p.jsx)("div",{className:"uk-width-expand",children:Object(p.jsxs)("button",{className:"uk-width-1-1 uk-text-left uk-button uk-button-small uk-button-default",style:{textTransform:"none"},title:"Open File",onClick:function(){return r.openTab(t,n)},children:[Object(p.jsx)("span",{"data-uk-icon":"file-text"})," ",a]})}),Object(p.jsx)("div",{className:"uk-width-auto",children:n||Object(p.jsx)("button",{className:"uk-button uk-button-small uk-button-danger uk-padding-remove",title:"Delete File",onClick:s,children:Object(p.jsx)("span",{"data-uk-icon":"close"})})})]})},m=function e(t){var n=t.path,r=t.readOnly,s=Object(c.useContext)(E),i=v.a.isSpecialDirectory(n),l=Object(c.useState)(null),d=Object(a.a)(l,2),b=d[0],j=d[1],m=Object(c.useState)(i),y=Object(a.a)(m,2),w=y[0],g=y[1],N=Object(c.useState)(""),L=Object(a.a)(N,2),F=L[0],D=L[1],C=x(n),S=b&&(b instanceof Error||b.directories.length>0||b.files.length>0||!r);Object(c.useEffect)((function(){return v.a.addDirectoryListener(n,j),v.a.enumDirectory(n).then(j).catch((function(e){return j(new Error(String(e)))})),function(){return v.a.removeDirectoryListener(n,j)}}),[n]);var _=function(){return g((function(e){return!e}))},T=function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(n,"/").concat(F),e.prev=1,e.next=4,v.a.createFile(t);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),e.next=10,h(String(e.t0));case 10:return e.abrupt("return",e.sent);case 11:D(""),s.openTab(t,r);case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(o.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.createDirectory("".concat(n,"/").concat(F));case 3:e.next=10;break;case 5:return e.prev=5,e.t0=e.catch(0),e.next=9,h(String(e.t0));case 9:return e.abrupt("return",e.sent);case 10:D("");case 11:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(o.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b||b instanceof Error||!(b.directories.length>0||b.files.length>0)){e.next=5;break}return e.next=3,h("The directory '".concat(n,"' is not empty."));case 3:case 11:e.next=17;break;case 5:return e.next=7,f("Are you sure you want to delete the folder '".concat(n,"'?"));case 7:if(!e.sent){e.next=17;break}return e.prev=8,e.next=11,v.a.deleteDirectory(n);case 13:return e.prev=13,e.t0=e.catch(8),e.next=17,h(String(e.t0));case 17:case"end":return e.stop()}}),e,null,[[8,13]])})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"uk-flex",children:[Object(p.jsx)("div",{className:"uk-width-auto",children:Object(p.jsx)("div",{className:"uk-icon-image",children:S&&Object(p.jsx)("span",{"data-uk-icon":w?"chevron-down":"chevron-right",style:{cursor:"pointer"},onClick:_})})}),Object(p.jsxs)("div",{className:"uk-width-expand",children:[Object(p.jsxs)("div",{className:"uk-flex",children:[Object(p.jsx)("div",{className:"uk-width-expand",children:Object(p.jsxs)("button",{className:"uk-width-1-1 uk-text-left uk-button uk-button-small uk-button-".concat(i?"primary":"secondary"),title:"".concat(S?w?"Collapse":"Expand":"Empty"," Folder"),style:{textTransform:"none"},onClick:_,disabled:!S,children:[Object(p.jsx)("span",{"data-uk-icon":"folder"}),Object(p.jsx)("span",{className:"uk-margin-small-left uk-margin-small-right",children:C}),!b&&Object(p.jsx)("div",{"data-uk-spinner":"ratio: 0.5"})]})}),Object(p.jsx)("div",{className:"uk-width-auto",children:r||i||Object(p.jsx)("button",{className:"uk-button uk-button-small uk-button-danger uk-padding-remove",title:"Delete Folder",onClick:M,children:Object(p.jsx)("span",{"data-uk-icon":"close"})})})]}),S&&w&&(b instanceof Error?Object(p.jsx)("div",{className:"uk-alert-danger",children:Object(p.jsx)("p",{children:b})}):Object(p.jsxs)(p.Fragment,{children:[b.directories.map((function(t){return Object(p.jsx)(e,{path:"".concat(n,"/").concat(t),readOnly:r},t)})),b.files.map((function(e){return Object(p.jsx)(O,{path:"".concat(n,"/").concat(e),readOnly:r},e)})),r||Object(p.jsxs)("div",{className:"uk-flex",children:[Object(p.jsx)("div",{className:"uk-width-auto",children:Object(p.jsx)("div",{className:"uk-icon-image"})}),Object(p.jsx)("div",{className:"uk-width-expand",children:Object(p.jsxs)("div",{className:"uk-inline",children:[Object(p.jsx)("span",{className:"uk-form-icon","data-uk-icon":"plus"}),Object(p.jsx)("input",{className:"uk-input uk-form-small uk-width-1-1",placeholder:"New ".concat(C," item..."),value:F,onChange:function(e){return D(e.target.value)}})]})}),Object(p.jsx)("div",{className:"uk-width-auto",children:Object(p.jsxs)("div",{className:"uk-button-group",children:[Object(p.jsx)("button",{className:"uk-button uk-button-small uk-button-primary uk-padding-remove",title:"Create File",onClick:T,disabled:k(F),children:Object(p.jsx)("span",{"data-uk-icon":"file-text"})}),Object(p.jsx)("button",{className:"uk-button uk-button-small uk-button-secondary uk-padding-remove",title:"Create Directory",onClick:P,disabled:k(F),children:Object(p.jsx)("span",{"data-uk-icon":"folder"})})]})})]})]}))]})]})},y=function(){return Object(p.jsxs)("div",{className:"uk-text-nowrap",children:[Object(p.jsx)(m,{path:v.b,readOnly:!1}),Object(p.jsx)(m,{path:v.c,readOnly:!0})]})},w=n(39),g=n(0),N=n(1),L=function(){function e(t){Object(g.a)(this,e),this.setTabs=t}return Object(N.a)(e,[{key:"openTab",value:function(e,t){this.setTabs((function(n){return Object(r.a)(Object(r.a)({},Object.fromEntries(Object.entries(n).map((function(e){var t=Object(a.a)(e,2),n=t[0],c=t[1];return[n,Object(r.a)(Object(r.a)({},c),{},{selected:!1})]})))),{},Object(w.a)({},e,{readOnly:t,selected:!0}))}))}},{key:"closeTab",value:function(e){this.setTabs((function(t){var n=t[e];if(n){var a=Object(r.a)({},t);if(delete a[e],n.selected){var c=Object.keys(t),s=c.indexOf(e),i=s+1<c.length?c[s+1]:s-1>=0?c[s-1]:void 0;if(void 0!==i){var u=a[i];u&&(a[i]=Object(r.a)(Object(r.a)({},u),{},{selected:!0}))}}return a}return t}))}}]),e}(),F=function(e){var t=e.id,n=e.path,r=e.selected,s=e.readOnly,i=Object(c.useContext)(E),u=Object(c.useState)(!1),o=Object(a.a)(u,2),l=o[0],d=o[1];return Object(c.useEffect)((function(){var e=function(e){return d(null==e)};return v.a.addFileListener(n,e),v.a.isFile(n).then((function(e){return d(!e)})).catch(console.trace),function(){return v.a.removeFileListener(n,e)}}),[i,n]),Object(p.jsx)("li",{className:r?"uk-active":"",children:Object(p.jsxs)("a",{href:t,onClick:function(e){i.openTab(n,s),e.preventDefault()},children:[Object(p.jsx)("span",{"uk-icon":"icon: file-text"}),Object(p.jsxs)("span",{className:"uk-margin-small-left uk-margin-small-right",style:{textTransform:"none"},children:[n,s&&" (read-only)",l&&" (deleted)"]}),Object(p.jsx)("button",{"data-uk-close":!0,onClick:function(e){i.closeTab(n),e.stopPropagation()}})]})})},D=n(229),C=n.n(D);n(239);d.a.use(C.a);var S=n(230),E=Object(c.createContext)({}),_=function(){var e,t=Object(c.useReducer)((function(e,t){var n=t(e);return window.localStorage.setItem("tabs",JSON.stringify(n)),n}),JSON.parse(null!==(e=window.localStorage.getItem("tabs"))&&void 0!==e?e:"{}")),n=Object(a.a)(t,2),s=n[0],i=n[1],u=Object(c.useMemo)((function(){return new L(i)}),[]);return Object(p.jsxs)(E.Provider,{value:u,children:[Object(p.jsxs)("nav",{className:"uk-navbar-container uk-navbar-transparent uk-light uk-background-primary","data-uk-navbar":!0,children:[Object(p.jsx)("div",{className:"uk-navbar-left",children:Object(p.jsx)("a",{className:"uk-navbar-item uk-logo",target:"_blank",rel:"noreferrer",href:"https://www.brics.dk/mona/",children:"MONA Web"})}),Object(p.jsx)("div",{className:"uk-navbar-right",children:Object(p.jsx)("div",{className:"uk-navbar-item",children:Object(p.jsx)("a",{className:"uk-button uk-button-default",target:"_blank",rel:"noreferrer",href:"http://www.brics.dk/mona/mona14.pdf",children:"Manual"})})})]}),Object(p.jsxs)("div",{className:"uk-grid-divider uk-grid-small uk-flex-nowrap","data-uk-grid":!0,"data-uk-height-viewport":"offset-top: true",children:[Object(p.jsxs)("div",{className:"uk-width-medium",children:[Object(p.jsx)("ul",{className:"uk-flex-center uk-tab",children:Object(p.jsx)("li",{className:"uk-active",children:Object(p.jsxs)("a",{href:"#browser",onClick:function(e){return e.preventDefault()},children:[Object(p.jsx)("span",{"uk-icon":"icon: copy"}),Object(p.jsx)("span",{className:"uk-margin-small-left",style:{textTransform:"none"},children:"Files"})]})})}),Object(p.jsx)("div",{id:"browser",children:Object(p.jsx)(y,{})})]}),Object(p.jsxs)("div",{className:"uk-width-extend",children:[Object(p.jsx)("ul",{className:"uk-tab",children:Object.entries(s).map((function(e,t){var n=Object(a.a)(e,2),r=n[0],c=n[1];return Object(p.jsx)(F,{id:"#workspace".concat(t),path:r,selected:c.selected,readOnly:c.readOnly},r)}))}),Object(p.jsx)("div",{className:"uk-margin",children:Object.entries(s).map((function(e,t){var n=Object(a.a)(e,2),c=n[0],s=n[1];return Object(p.jsx)("div",{id:"workspace".concat(t),hidden:!s.selected,children:Object(p.jsx)(S.a,Object(r.a)({id:t,path:c},s))},c)}))})]})]})]})};Object(s.render)(Object(p.jsx)(_,{}),document.getElementById("app"))}},[[309,3,4]]]);
//# sourceMappingURL=main.5c209cdd.chunk.js.map